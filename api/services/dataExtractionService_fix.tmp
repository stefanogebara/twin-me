  /**
   * Update connector metadata after extraction
   */
  async updateConnectorMetadata(connectorId, extractionResult) {
    try {
      const now = new Date().toISOString();
      const metadata = {
        last_sync: now,
        last_sync_status: extractionResult.success ? 'success' : 'failed',
        last_sync_items: extractionResult.itemsExtracted || 0
      };

      await supabase
        .from('data_connectors')
        .update({ 
          metadata,
          last_sync: now,
          last_sync_status: extractionResult.success ? 'success' : 'failed',
          total_synced: extractionResult.itemsExtracted || 0
        })
        .eq('id', connectorId);
    } catch (error) {
      console.error('[DataExtraction] Error updating metadata:', error);
    }
  }
